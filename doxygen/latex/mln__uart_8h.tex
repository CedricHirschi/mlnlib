\hypertarget{mln__uart_8h}{}\doxysection{mlnlib/mln/mln\+\_\+uart.h File Reference}
\label{mln__uart_8h}\index{mlnlib/mln/mln\_uart.h@{mlnlib/mln/mln\_uart.h}}


This peripheral is used to communicate with USART.  


{\ttfamily \#include $<$avr/io.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$avr/interrupt.\+h$>$}\newline
{\ttfamily \#include \char`\"{}mln\+\_\+gpio.\+h\char`\"{}}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classmln__uart}{mln\+\_\+uart}}
\begin{DoxyCompactList}\small\item\em USART peripheral class. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{mln__uart_8h_af296e92127536a1e65460c4de0458815}{MLN\+\_\+\+UART\+\_\+\+BUF\+\_\+\+SIZE}}~32
\begin{DoxyCompactList}\small\item\em Maximum UART buffer size. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{mln__uart_8h_a1a434695c07951710eb0a173a65f279f}{MLN\+\_\+\+UART0\+\_\+\+PIN\+\_\+\+TX}}~PA0
\item 
\#define \mbox{\hyperlink{mln__uart_8h_ab005771276881b9a746a85e1932caca4}{MLN\+\_\+\+UART0\+\_\+\+PIN\+\_\+\+RX}}~PA1
\item 
\#define \mbox{\hyperlink{mln__uart_8h_a9c2c8bc428b370f8f37e9fab7b0208b5}{MLN\+\_\+\+UART1\+\_\+\+PIN\+\_\+\+TX}}~PC0
\item 
\#define \mbox{\hyperlink{mln__uart_8h_a32b2fb0bd8d40942dacdedae86748f55}{MLN\+\_\+\+UART1\+\_\+\+PIN\+\_\+\+RX}}~PC1
\item 
\#define \mbox{\hyperlink{mln__uart_8h_ab5cf516196dab3fb027cb0a1394c1189}{MLN\+\_\+\+UART2\+\_\+\+PIN\+\_\+\+TX}}~PF0
\item 
\#define \mbox{\hyperlink{mln__uart_8h_a1e086a98b618a643b43fe26adac726cc}{MLN\+\_\+\+UART2\+\_\+\+PIN\+\_\+\+RX}}~PF1
\item 
\#define \mbox{\hyperlink{mln__uart_8h_ad728e72885f09aa314f2436dfe99293d}{MLN\+\_\+\+UART\+\_\+\+NUM\+\_\+\+INSTS}}~3
\item 
\#define \mbox{\hyperlink{mln__uart_8h_a9978acfe9e00540d2e18286481e786ef}{MLN\+\_\+\+UART\+\_\+\+BAUD\+\_\+\+NUM}}(BAUD)~((float)(F\+\_\+\+CPU $\ast$ 64 / (16 $\ast$ (float)BAUD)) + 0.\+5)
\begin{DoxyCompactList}\small\item\em Macro to calculate register value from baud rate. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{mln__uart_8h_adf9b46a7020b85c33ea70568078d17ec}{mln\+\_\+uart\+\_\+stream\+\_\+write}} (char character, FILE $\ast$f)
\begin{DoxyCompactList}\small\item\em Helper function to write from std stream to USART peripheral. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{mln__uart_8h_a6f1e39e7e87ce420c069533972807f70}{mln\+\_\+uart\+\_\+stream\+\_\+read}} (FILE $\ast$f)
\begin{DoxyCompactList}\small\item\em Helper function to read USART peripheral to std stream. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mln__uart_8h_a1f11fdfd6a878a854419434a4a401693}{ISR}} (USART3\+\_\+\+RXC\+\_\+vect)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmln__uart}{mln\+\_\+uart}} $\ast$ \mbox{\hyperlink{mln__uart_8h_a768b1692fd426a153624045053f62395}{mln\+\_\+uart\+\_\+stream\+\_\+uart}}
\begin{DoxyCompactList}\small\item\em USART stream (for printf functionality) \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This peripheral is used to communicate with USART. 

\begin{DoxyAuthor}{Author}
Cédric Hirschi (\href{mailto:cedr02@live.com}{\texttt{ cedr02@live.\+com}}) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2023-\/04-\/27
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2023 
\end{DoxyCopyright}


Definition in file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.



\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{mln__uart_8h_ab005771276881b9a746a85e1932caca4}\label{mln__uart_8h_ab005771276881b9a746a85e1932caca4}} 
\index{mln\_uart.h@{mln\_uart.h}!MLN\_UART0\_PIN\_RX@{MLN\_UART0\_PIN\_RX}}
\index{MLN\_UART0\_PIN\_RX@{MLN\_UART0\_PIN\_RX}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{MLN\_UART0\_PIN\_RX}{MLN\_UART0\_PIN\_RX}}
{\footnotesize\ttfamily \#define MLN\+\_\+\+UART0\+\_\+\+PIN\+\_\+\+RX~PA1}



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00036}{36}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

\mbox{\Hypertarget{mln__uart_8h_a1a434695c07951710eb0a173a65f279f}\label{mln__uart_8h_a1a434695c07951710eb0a173a65f279f}} 
\index{mln\_uart.h@{mln\_uart.h}!MLN\_UART0\_PIN\_TX@{MLN\_UART0\_PIN\_TX}}
\index{MLN\_UART0\_PIN\_TX@{MLN\_UART0\_PIN\_TX}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{MLN\_UART0\_PIN\_TX}{MLN\_UART0\_PIN\_TX}}
{\footnotesize\ttfamily \#define MLN\+\_\+\+UART0\+\_\+\+PIN\+\_\+\+TX~PA0}



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00035}{35}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

\mbox{\Hypertarget{mln__uart_8h_a32b2fb0bd8d40942dacdedae86748f55}\label{mln__uart_8h_a32b2fb0bd8d40942dacdedae86748f55}} 
\index{mln\_uart.h@{mln\_uart.h}!MLN\_UART1\_PIN\_RX@{MLN\_UART1\_PIN\_RX}}
\index{MLN\_UART1\_PIN\_RX@{MLN\_UART1\_PIN\_RX}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{MLN\_UART1\_PIN\_RX}{MLN\_UART1\_PIN\_RX}}
{\footnotesize\ttfamily \#define MLN\+\_\+\+UART1\+\_\+\+PIN\+\_\+\+RX~PC1}



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00038}{38}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

\mbox{\Hypertarget{mln__uart_8h_a9c2c8bc428b370f8f37e9fab7b0208b5}\label{mln__uart_8h_a9c2c8bc428b370f8f37e9fab7b0208b5}} 
\index{mln\_uart.h@{mln\_uart.h}!MLN\_UART1\_PIN\_TX@{MLN\_UART1\_PIN\_TX}}
\index{MLN\_UART1\_PIN\_TX@{MLN\_UART1\_PIN\_TX}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{MLN\_UART1\_PIN\_TX}{MLN\_UART1\_PIN\_TX}}
{\footnotesize\ttfamily \#define MLN\+\_\+\+UART1\+\_\+\+PIN\+\_\+\+TX~PC0}



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00037}{37}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

\mbox{\Hypertarget{mln__uart_8h_a1e086a98b618a643b43fe26adac726cc}\label{mln__uart_8h_a1e086a98b618a643b43fe26adac726cc}} 
\index{mln\_uart.h@{mln\_uart.h}!MLN\_UART2\_PIN\_RX@{MLN\_UART2\_PIN\_RX}}
\index{MLN\_UART2\_PIN\_RX@{MLN\_UART2\_PIN\_RX}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{MLN\_UART2\_PIN\_RX}{MLN\_UART2\_PIN\_RX}}
{\footnotesize\ttfamily \#define MLN\+\_\+\+UART2\+\_\+\+PIN\+\_\+\+RX~PF1}



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00040}{40}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

\mbox{\Hypertarget{mln__uart_8h_ab5cf516196dab3fb027cb0a1394c1189}\label{mln__uart_8h_ab5cf516196dab3fb027cb0a1394c1189}} 
\index{mln\_uart.h@{mln\_uart.h}!MLN\_UART2\_PIN\_TX@{MLN\_UART2\_PIN\_TX}}
\index{MLN\_UART2\_PIN\_TX@{MLN\_UART2\_PIN\_TX}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{MLN\_UART2\_PIN\_TX}{MLN\_UART2\_PIN\_TX}}
{\footnotesize\ttfamily \#define MLN\+\_\+\+UART2\+\_\+\+PIN\+\_\+\+TX~PF0}



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00039}{39}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

\mbox{\Hypertarget{mln__uart_8h_a9978acfe9e00540d2e18286481e786ef}\label{mln__uart_8h_a9978acfe9e00540d2e18286481e786ef}} 
\index{mln\_uart.h@{mln\_uart.h}!MLN\_UART\_BAUD\_NUM@{MLN\_UART\_BAUD\_NUM}}
\index{MLN\_UART\_BAUD\_NUM@{MLN\_UART\_BAUD\_NUM}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{MLN\_UART\_BAUD\_NUM}{MLN\_UART\_BAUD\_NUM}}
{\footnotesize\ttfamily \#define MLN\+\_\+\+UART\+\_\+\+BAUD\+\_\+\+NUM(\begin{DoxyParamCaption}\item[{}]{BAUD }\end{DoxyParamCaption})~((float)(F\+\_\+\+CPU $\ast$ 64 / (16 $\ast$ (float)BAUD)) + 0.\+5)}



Macro to calculate register value from baud rate. 



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00070}{70}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

\mbox{\Hypertarget{mln__uart_8h_af296e92127536a1e65460c4de0458815}\label{mln__uart_8h_af296e92127536a1e65460c4de0458815}} 
\index{mln\_uart.h@{mln\_uart.h}!MLN\_UART\_BUF\_SIZE@{MLN\_UART\_BUF\_SIZE}}
\index{MLN\_UART\_BUF\_SIZE@{MLN\_UART\_BUF\_SIZE}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{MLN\_UART\_BUF\_SIZE}{MLN\_UART\_BUF\_SIZE}}
{\footnotesize\ttfamily \#define MLN\+\_\+\+UART\+\_\+\+BUF\+\_\+\+SIZE~32}



Maximum UART buffer size. 

\begin{DoxyNote}{Note}
Currently RX only 

Can be changed without further problems 
\end{DoxyNote}


Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00033}{33}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

\mbox{\Hypertarget{mln__uart_8h_ad728e72885f09aa314f2436dfe99293d}\label{mln__uart_8h_ad728e72885f09aa314f2436dfe99293d}} 
\index{mln\_uart.h@{mln\_uart.h}!MLN\_UART\_NUM\_INSTS@{MLN\_UART\_NUM\_INSTS}}
\index{MLN\_UART\_NUM\_INSTS@{MLN\_UART\_NUM\_INSTS}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{MLN\_UART\_NUM\_INSTS}{MLN\_UART\_NUM\_INSTS}}
{\footnotesize\ttfamily \#define MLN\+\_\+\+UART\+\_\+\+NUM\+\_\+\+INSTS~3}



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00063}{63}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{mln__uart_8h_a1f11fdfd6a878a854419434a4a401693}\label{mln__uart_8h_a1f11fdfd6a878a854419434a4a401693}} 
\index{mln\_uart.h@{mln\_uart.h}!ISR@{ISR}}
\index{ISR@{ISR}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{ISR()}{ISR()}}
{\footnotesize\ttfamily ISR (\begin{DoxyParamCaption}\item[{USART3\+\_\+\+RXC\+\_\+vect}]{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00277}{277}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

\mbox{\Hypertarget{mln__uart_8h_a6f1e39e7e87ce420c069533972807f70}\label{mln__uart_8h_a6f1e39e7e87ce420c069533972807f70}} 
\index{mln\_uart.h@{mln\_uart.h}!mln\_uart\_stream\_read@{mln\_uart\_stream\_read}}
\index{mln\_uart\_stream\_read@{mln\_uart\_stream\_read}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{mln\_uart\_stream\_read()}{mln\_uart\_stream\_read()}}
{\footnotesize\ttfamily int mln\+\_\+uart\+\_\+stream\+\_\+read (\begin{DoxyParamCaption}\item[{FILE $\ast$}]{f }\end{DoxyParamCaption})}



Helper function to read USART peripheral to std stream. 



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00272}{272}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

\mbox{\Hypertarget{mln__uart_8h_adf9b46a7020b85c33ea70568078d17ec}\label{mln__uart_8h_adf9b46a7020b85c33ea70568078d17ec}} 
\index{mln\_uart.h@{mln\_uart.h}!mln\_uart\_stream\_write@{mln\_uart\_stream\_write}}
\index{mln\_uart\_stream\_write@{mln\_uart\_stream\_write}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{mln\_uart\_stream\_write()}{mln\_uart\_stream\_write()}}
{\footnotesize\ttfamily int mln\+\_\+uart\+\_\+stream\+\_\+write (\begin{DoxyParamCaption}\item[{char}]{character,  }\item[{FILE $\ast$}]{f }\end{DoxyParamCaption})}



Helper function to write from std stream to USART peripheral. 



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00266}{266}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{mln__uart_8h_a768b1692fd426a153624045053f62395}\label{mln__uart_8h_a768b1692fd426a153624045053f62395}} 
\index{mln\_uart.h@{mln\_uart.h}!mln\_uart\_stream\_uart@{mln\_uart\_stream\_uart}}
\index{mln\_uart\_stream\_uart@{mln\_uart\_stream\_uart}!mln\_uart.h@{mln\_uart.h}}
\doxysubsubsection{\texorpdfstring{mln\_uart\_stream\_uart}{mln\_uart\_stream\_uart}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmln__uart}{mln\+\_\+uart}}$\ast$ mln\+\_\+uart\+\_\+stream\+\_\+uart}



USART stream (for printf functionality) 



Definition at line \mbox{\hyperlink{mln__uart_8h_source_l00082}{82}} of file \mbox{\hyperlink{mln__uart_8h_source}{mln\+\_\+uart.\+h}}.

