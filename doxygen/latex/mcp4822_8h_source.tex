\hypertarget{mcp4822_8h_source}{}\doxysection{mcp4822.\+h}
\label{mcp4822_8h_source}\index{mlnlib/devices/mcp4822.h@{mlnlib/devices/mcp4822.h}}
\mbox{\hyperlink{mcp4822_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00001}00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00002}00002\ \textcolor{comment}{\ *\ mcp4822.h}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00003}00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00004}00004\ \textcolor{comment}{\ *\ Created:\ 05.04.2023\ 00:39:27}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00005}00005\ \textcolor{comment}{\ *\ Author:\ cedr0}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00006}00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00008}00008\ \textcolor{preprocessor}{\#ifndef\ \_\_MCP4822\_H\_\_}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00009}00009\ \textcolor{preprocessor}{\#define\ \_\_MCP4822\_H\_\_}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00011}00011\ \textcolor{preprocessor}{\#include\ "{}../mln/mln\_spi.h"{}}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00013}\mbox{\hyperlink{mcp4822_8h_abaf813333da89c9c8ede6d6785dd6643}{00013}}\ \textcolor{preprocessor}{\#define\ MCP4822\_ENABLE\_bm\ (1\ <<\ 4)}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00015}00015\ \textcolor{comment}{//\ defines\ available\ gains\ of\ the\ MCP4822}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00016}\mbox{\hyperlink{mcp4822_8h_ad81ebe379bffb9e6fb8fbca3b4268f8c}{00016}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{mcp4822_8h_ad81ebe379bffb9e6fb8fbca3b4268f8c}{mln\_spi\_gain\_s}}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00017}00017\ \{}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00018}00018\ \ \ \ \ \textcolor{comment}{//\ 2x\ gain}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00019}\mbox{\hyperlink{mcp4822_8h_ad81ebe379bffb9e6fb8fbca3b4268f8cab7f3990ab019ca51d5c36c38610d3647}{00019}}\ \ \ \ \ \mbox{\hyperlink{mcp4822_8h_ad81ebe379bffb9e6fb8fbca3b4268f8cab7f3990ab019ca51d5c36c38610d3647}{GAIN2}},}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00020}00020\ \ \ \ \ \textcolor{comment}{//\ 1x\ gain}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00021}00021\ \ \ \ \ \mbox{\hyperlink{mcp4822_8h_ad81ebe379bffb9e6fb8fbca3b4268f8cabc7f4570af25abeb1662eb9293cb8dac}{GAIN1}}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00022}\mbox{\hyperlink{mcp4822_8h_ad81ebe379bffb9e6fb8fbca3b4268f8cabc7f4570af25abeb1662eb9293cb8dac}{00022}}\ \}\ \mbox{\hyperlink{mcp4822_8h_a879195ec270451ec6332d445fcfc2e4e}{MCP4822\_GAIN\_t}};}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00024}00024\ \textcolor{comment}{//\ defines\ available\ channels\ of\ the\ MCP4822}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00025}\mbox{\hyperlink{mcp4822_8h_a371608cd8cede1042343c4a0564cf967}{00025}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{mcp4822_8h_a371608cd8cede1042343c4a0564cf967}{mln\_spi\_channel\_s}}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00026}00026\ \{}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00027}00027\ \ \ \ \ \textcolor{comment}{//\ channel\ A}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00028}\mbox{\hyperlink{mcp4822_8h_a371608cd8cede1042343c4a0564cf967a8fd1b51d90d7ad1d0f99b982cb9b54a3}{00028}}\ \ \ \ \ \mbox{\hyperlink{mcp4822_8h_a371608cd8cede1042343c4a0564cf967a8fd1b51d90d7ad1d0f99b982cb9b54a3}{CHANNELA}},}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00029}00029\ \ \ \ \ \textcolor{comment}{//\ channel\ B}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00030}00030\ \ \ \ \ \mbox{\hyperlink{mcp4822_8h_a371608cd8cede1042343c4a0564cf967ad7b173e89c914ff6263f40cf8310722f}{CHANNELB}}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00031}\mbox{\hyperlink{mcp4822_8h_a371608cd8cede1042343c4a0564cf967ad7b173e89c914ff6263f40cf8310722f}{00031}}\ \}\ \mbox{\hyperlink{mcp4822_8h_a616d1661b8f2ff64df13b8a248a6849c}{MCP4822\_CHANNEL\_t}};}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00038}\mbox{\hyperlink{classmcp4822}{00038}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmcp4822}{mcp4822}}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00039}00039\ \{}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00040}00040\ \ \ \ \ \textcolor{comment}{//\ SPI\ interface}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00041}00041\ \ \ \ \ \mbox{\hyperlink{classmln__spi}{mln\_spi}}\ spi;}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00042}00042\ \ \ \ \ \textcolor{comment}{//\ LDAC\ pin}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00043}00043\ \ \ \ \ \mbox{\hyperlink{classmln__gpio}{mln\_gpio}}\ ldac;}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00045}00045\ \ \ \ \ \textcolor{comment}{//\ current\ gain}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00046}00046\ \ \ \ \ \mbox{\hyperlink{mcp4822_8h_a879195ec270451ec6332d445fcfc2e4e}{MCP4822\_GAIN\_t}}\ gain;}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00048}00048\ \ \ \ \ \textcolor{comment}{//\ buffer\ for\ SPI\ transfer}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00049}00049\ \ \ \ \ uint8\_t\ buffer[2];}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00051}00051\ \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00059}\mbox{\hyperlink{classmcp4822_af197f1fb877c276e14da81be6b5d943e}{00059}}\ \ \ \ \ \mbox{\hyperlink{classmcp4822_af197f1fb877c276e14da81be6b5d943e}{mcp4822}}(SPI\_t\ *new\_spi,\ \mbox{\hyperlink{struct_p_i_n__t}{PIN\_t}}\ cs,\ \mbox{\hyperlink{struct_p_i_n__t}{PIN\_t}}\ new\_ldac)}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00060}00060\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00061}00061\ \ \ \ \ \ \ \ \ spi\ =\ \mbox{\hyperlink{classmln__spi}{mln\_spi}}(new\_spi,\ cs);}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00062}00062\ \ \ \ \ \ \ \ \ ldac\ =\ \mbox{\hyperlink{classmln__gpio}{mln\_gpio}}(new\_ldac,\ \mbox{\hyperlink{mln__gpio_8h_a76799e70246140bb0ef2dbbf0af942fda2ab08d3e103968f5f4f26b66a52e99d6}{OUTPUT}});}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00064}00064\ \ \ \ \ \ \ \ \ ldac.\mbox{\hyperlink{classmln__gpio_a6658a4ffd79c21c982ca896521db7386}{set}}();}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00065}00065\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00074}\mbox{\hyperlink{classmcp4822_a14c3bb0cbbb9e726156ec01136661ece}{00074}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classmcp4822_a14c3bb0cbbb9e726156ec01136661ece}{set\_gain}}(\mbox{\hyperlink{mcp4822_8h_a879195ec270451ec6332d445fcfc2e4e}{MCP4822\_GAIN\_t}}\ new\_gain)\ \{\ gain\ =\ new\_gain;\ \}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00082}\mbox{\hyperlink{classmcp4822_a8c444d2209b4c4c5ab3d8ebc99071a75}{00082}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classmcp4822_a8c444d2209b4c4c5ab3d8ebc99071a75}{write}}(\mbox{\hyperlink{mcp4822_8h_a616d1661b8f2ff64df13b8a248a6849c}{MCP4822\_CHANNEL\_t}}\ channel,\ uint16\_t\ value)}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00083}00083\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00084}00084\ \ \ \ \ \ \ \ \ buffer[0]\ =\ (channel\ <<\ 7)\ |\ (gain\ <<\ 5)\ |\ \mbox{\hyperlink{mcp4822_8h_abaf813333da89c9c8ede6d6785dd6643}{MCP4822\_ENABLE\_bm}}\ |\ (uint8\_t)(value\ >>\ 8);}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00085}00085\ \ \ \ \ \ \ \ \ buffer[1]\ =\ (uint8\_t)(value\ \&\ 0xFF);}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00086}00086\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00087}00087\ \ \ \ \ \ \ \ \ spi.\mbox{\hyperlink{classmln__spi_af145b40e4b5496b5aa1c14f7ae6c15a2}{write}}(buffer,\ 2);}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00088}00088\ \ \ \ \ \ \ \ \ ldac.\mbox{\hyperlink{classmln__gpio_a0aa0cdb1d45809203f26c801dfac2a09}{clear}}();}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00089}00089\ \ \ \ \ \ \ \ \ ldac.\mbox{\hyperlink{classmln__gpio_a6658a4ffd79c21c982ca896521db7386}{set}}();}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00090}00090\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00091}00091\ \};\ \textcolor{comment}{//\ mcp4822}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00093}00093\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\_\_MCP4822\_H\_\_}}

\end{DoxyCode}
