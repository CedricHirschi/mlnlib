\hypertarget{mcp4822_8h_source}{}\doxysection{mcp4822.\+h}
\label{mcp4822_8h_source}\index{mlnlib/devices/mcp4822.h@{mlnlib/devices/mcp4822.h}}
\mbox{\hyperlink{mcp4822_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00001}00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00002}00002\ \textcolor{comment}{\ *\ mcp4822.h}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00003}00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00004}00004\ \textcolor{comment}{\ *\ Created:\ 05.04.2023\ 00:39:27}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00005}00005\ \textcolor{comment}{\ *\ Author:\ cedr0}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00006}00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00008}00008\ \textcolor{preprocessor}{\#ifndef\ \_\_MCP4822\_H\_\_}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00009}00009\ \textcolor{preprocessor}{\#define\ \_\_MCP4822\_H\_\_}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00011}00011\ \textcolor{preprocessor}{\#include\ "{}../mln/mln\_spi.h"{}}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00013}\mbox{\hyperlink{mcp4822_8h_a436e620a00671eac997a981cd58b88ba}{00013}}\ \textcolor{preprocessor}{\#define\ MLN\_MCP4822\_ENABLE\_bm\ (1\ <<\ 4)}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00019}\mbox{\hyperlink{mcp4822_8h_a405a5c74199b2cc7e82ed3bead405a91}{00019}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00020}00020\ \{}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00021}\mbox{\hyperlink{mcp4822_8h_a405a5c74199b2cc7e82ed3bead405a91a0d530a85f65581e359d520b1de5322d6}{00021}}\ \ \ \ \ \mbox{\hyperlink{mcp4822_8h_a405a5c74199b2cc7e82ed3bead405a91a0d530a85f65581e359d520b1de5322d6}{MLN\_MCP4822\_GAIN2}}\ =\ 0,}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00022}00022\ \ \ \ \ \mbox{\hyperlink{mcp4822_8h_a405a5c74199b2cc7e82ed3bead405a91a014d34ce777cc0b4707a2e2a39a43a7c}{MLN\_MCP4822\_GAIN1}}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00023}\mbox{\hyperlink{mcp4822_8h_a405a5c74199b2cc7e82ed3bead405a91a014d34ce777cc0b4707a2e2a39a43a7c}{00023}}\ \}\ \mbox{\hyperlink{mcp4822_8h_a405a5c74199b2cc7e82ed3bead405a91}{mln\_mcp4822\_gain\_t}};}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00029}\mbox{\hyperlink{mcp4822_8h_a7e58481bb9c447a43a8cf2f482bcfcbb}{00029}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00030}00030\ \{}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00031}00031\ \ \ \ \ \textcolor{comment}{//\ channel\ A}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00032}\mbox{\hyperlink{mcp4822_8h_a7e58481bb9c447a43a8cf2f482bcfcbba8fd1b51d90d7ad1d0f99b982cb9b54a3}{00032}}\ \ \ \ \ \mbox{\hyperlink{mcp4822_8h_a7e58481bb9c447a43a8cf2f482bcfcbba8fd1b51d90d7ad1d0f99b982cb9b54a3}{CHANNELA}},}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00033}00033\ \ \ \ \ \textcolor{comment}{//\ channel\ B}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00034}00034\ \ \ \ \ \mbox{\hyperlink{mcp4822_8h_a7e58481bb9c447a43a8cf2f482bcfcbbad7b173e89c914ff6263f40cf8310722f}{CHANNELB}}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00035}\mbox{\hyperlink{mcp4822_8h_a7e58481bb9c447a43a8cf2f482bcfcbbad7b173e89c914ff6263f40cf8310722f}{00035}}\ \}\ \mbox{\hyperlink{mcp4822_8h_a7e58481bb9c447a43a8cf2f482bcfcbb}{mln\_mcp4822\_channel\_t}};}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00042}\mbox{\hyperlink{classmcp4822}{00042}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmcp4822}{mcp4822}}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00043}00043\ \{}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00044}00044\ \ \ \ \ \textcolor{comment}{//\ SPI\ interface}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00045}00045\ \ \ \ \ \mbox{\hyperlink{classmln__spi}{mln\_spi}}\ spi;}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00046}00046\ \ \ \ \ \textcolor{comment}{//\ LDAC\ pin}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00047}00047\ \ \ \ \ \mbox{\hyperlink{classmln__gpio}{mln\_gpio}}\ ldac;}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00049}00049\ \ \ \ \ \textcolor{comment}{//\ current\ gain}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00050}00050\ \ \ \ \ \mbox{\hyperlink{mcp4822_8h_a405a5c74199b2cc7e82ed3bead405a91}{mln\_mcp4822\_gain\_t}}\ gain;}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00052}00052\ \ \ \ \ \textcolor{comment}{//\ buffer\ for\ SPI\ transfer}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00053}00053\ \ \ \ \ uint8\_t\ buffer[2];}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00055}00055\ \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00063}\mbox{\hyperlink{classmcp4822_ac2ce639350ba7a309227a3e510ceb183}{00063}}\ \ \ \ \ \mbox{\hyperlink{classmcp4822_ac2ce639350ba7a309227a3e510ceb183}{mcp4822}}(SPI\_t\ *new\_spi,\ \mbox{\hyperlink{structmln__pin__t}{mln\_pin\_t}}\&\ cs,\ \mbox{\hyperlink{structmln__pin__t}{mln\_pin\_t}}\&\ new\_ldac)}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00064}00064\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00065}00065\ \ \ \ \ \ \ \ \ spi\ =\ \mbox{\hyperlink{classmln__spi}{mln\_spi}}(new\_spi,\ cs);}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00066}00066\ \ \ \ \ \ \ \ \ ldac\ =\ \mbox{\hyperlink{classmln__gpio}{mln\_gpio}}(new\_ldac,\ \mbox{\hyperlink{mln__gpio_8h_a3b39a8438117dc8dc97942e72edc36ffa1b3e51e05bb8ee323f13de27944188a1}{MLN\_GPIO\_DIR\_OUTPUT}});}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00068}00068\ \ \ \ \ \ \ \ \ ldac.\mbox{\hyperlink{classmln__gpio_a6658a4ffd79c21c982ca896521db7386}{set}}();}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00069}00069\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00078}\mbox{\hyperlink{classmcp4822_ab5995c3e631c799d35da2b1ae2ab021a}{00078}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classmcp4822_ab5995c3e631c799d35da2b1ae2ab021a}{set\_gain}}(\mbox{\hyperlink{mcp4822_8h_a405a5c74199b2cc7e82ed3bead405a91}{mln\_mcp4822\_gain\_t}}\ new\_gain)\ \{\ gain\ =\ new\_gain;\ \}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00086}\mbox{\hyperlink{classmcp4822_ad9d33f039c793af64c51c77a6203197c}{00086}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classmcp4822_ad9d33f039c793af64c51c77a6203197c}{write}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{mcp4822_8h_a7e58481bb9c447a43a8cf2f482bcfcbb}{mln\_mcp4822\_channel\_t}}\ channel,\ \textcolor{keyword}{const}\ uint16\_t\ value)}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00087}00087\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00088}00088\ \ \ \ \ \ \ \ \ buffer[0]\ =\ (channel\ <<\ 7)\ |\ (gain\ <<\ 5)\ |\ \mbox{\hyperlink{mcp4822_8h_a436e620a00671eac997a981cd58b88ba}{MLN\_MCP4822\_ENABLE\_bm}}\ |\ (uint8\_t)(value\ >>\ 8);}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00089}00089\ \ \ \ \ \ \ \ \ buffer[1]\ =\ (uint8\_t)(value\ \&\ 0xFF);}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00091}00091\ \ \ \ \ \ \ \ \ spi.\mbox{\hyperlink{classmln__spi_af145b40e4b5496b5aa1c14f7ae6c15a2}{write}}(buffer,\ 2);}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00092}00092\ \ \ \ \ \ \ \ \ ldac.\mbox{\hyperlink{classmln__gpio_a0aa0cdb1d45809203f26c801dfac2a09}{clear}}();}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00093}00093\ \ \ \ \ \ \ \ \ ldac.\mbox{\hyperlink{classmln__gpio_a6658a4ffd79c21c982ca896521db7386}{set}}();}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00094}00094\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00095}00095\ \};\ \textcolor{comment}{//\ mcp4822}}
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00096}00096\ }
\DoxyCodeLine{\Hypertarget{mcp4822_8h_source_l00097}00097\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\_\_MCP4822\_H\_\_}}

\end{DoxyCode}
